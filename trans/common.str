module common

imports
  
  src-gen/signatures/-
  signatures-norm/-
  signatures
  normalizedAST-sig

rules
  
  is-aggregate = ?COUNT(_, _) + ?MIN(_, _) + ?MAX(_, _) + ?SUM(_, _) + ?AVG(_, _) + ?GROUP-CONCAT(_, _, _)
    
  UNNAMED-PREFIX = !"GENERATED-"
  add-random-prefix:
  	name -> <conc-strings> (<UNNAMED-PREFIX>, random-number, name')
  	with
  		random-number := <next-random; abs; write-to-string>;
  		name' := <?"" <+ !$[: [name]]> name