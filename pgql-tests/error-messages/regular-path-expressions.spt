module common-path-expressions

language pgql-lang

/* FIXME
test Duplicate group variable (1) [[

  SELECT n
   MATCH (n) -[ [[e]] ]-> (m)
       , SHORTEST 10 ( (n) -[ [[e]]:likes]->* (m) )
 
 ]] error like "Duplicate variable" at #1, #2
*/

test Quantifier not enclosed by SHORTEST [[

  SELECT n
   MATCH (n) ->[[*]] (m)
       , (n) ->[[+]] (m)
       , (n) ->[[?]] (m)
       , (n) ->[[{2}]] (m)
       , (n) ->[[{,2}]] (m)
       , (n) ->[[{2,}]] (m)
       , (n) ->[[{2,3}]] (m)

]] error like "Quantifier needs to be enclosed by SHORTEST" at #1, #2, #3, #4, #5, #6, #7

test K equals zero [[

  SELECT n MATCH TOP [[0]] SHORTEST( (n) ->* (m) )

]]  error like "Value should be greater than 0" at #1

test Multiple edges in SHORTEST [[

  SELECT n.prop AS nProp
   MATCH SHORTEST( (n) [[-[e1]->* (m) ->*]] (o) )

]] error like "Not yet supported: multiple edges in SHORTEST" at #1

test No Kleene star in SHORTEST (1) [[

  SELECT n.prop AS nProp
   MATCH SHORTEST  ( (n) -[e1]->[[+]] (m) )

]] error like "Kleene star (*) required for now" at #1

test No Kleene star in SHORTEST (2) [[

  SELECT n.prop AS nProp
   MATCH SHORTEST  ( (n) [[-[e1]-> (m)]] )

]] error like "Kleene star (*) required for now" at #1

test No Kleene star in SHORTEST (2) [[

  SELECT n.prop AS nProp
   MATCH SHORTEST  ( (n) (-[e1]->)[[+]] (m) )

]] error like "Kleene star (*) required for now" at #1

test No Kleene star in SHORTEST (2) [[

  SELECT n.prop AS nProp
   MATCH SHORTEST  ( (n) [[(-[e1]->)]] (m) )

]] error like "Kleene star (*) required for now" at #1

test Duplicate variables (1) [[

  SELECT n.prop AS nProp
   MATCH SHORTEST  ( (n) -[ [[e]] ]-> (m) )
       , (n) -[ [[e]] ]-> (m)

]] error like "Duplicate variable" at #1, #2

test Duplicate variables (2) [[

  SELECT n.prop AS nProp
   MATCH SHORTEST  ( (n) (-> ([[dst]]))* (m) )
       , ([[dst]])

]] error like "Duplicate variable" at #1, #2

test Duplicate variables (3) [[

  SELECT n.prop AS nProp
   MATCH SHORTEST  ( (n) (-> ([[m]]))* ([[m]]) )

]] error like "Duplicate variable" at #1, #2

test Duplicate variables (4) [[

  SELECT n.prop AS nProp
   MATCH SHORTEST  ( ([[n]]) (-[ [[n]] ]->)* (m) )

]] error like "Duplicate variable" at #1, #2

test Duplicate variables (5) [[

  SELECT n.prop AS nProp
   MATCH SHORTEST  ( (n) [[(-> (m)) (m) )]]

]] error like "Duplicate variable" at #1

test Duplicate variables (6) [[

  SELECT n.prop AS nProp
   MATCH SHORTEST  ( (n) -[ [[e]] ]->* (m) )
       , SHORTEST  ( (n) -[ [[e]] ]->* (m) )

]] error like "Duplicate variable" at #1, #2

test Duplicate variables (7) [[

  SELECT n.prop AS nProp
   MATCH SHORTEST  ( (n) (-> ([[x]]))* (m) )
       , SHORTEST  ( (n) -[ [[x]] ]->* (m) )

]] error like "Duplicate variable" at #1, #2

test Duplicate variables (8) [[

  SELECT dst
   MATCH SHORTEST  ( (n) -[e]->* (m) )
   group by n AS [[e]]

]] error like "Duplicate variable: variable already defined in the MATCH clause" at #1

test Duplicate variables (9) [[

  SELECT dst
   MATCH SHORTEST  ( (n) (-> (dst))* (m) )
   group by n AS [[dst]]

]] error like "Duplicate variable: variable already defined in the MATCH clause" at #1
