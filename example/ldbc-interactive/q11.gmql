MATCH
  {
    MATCH
      (person:Person@12345) -[:KNOWS]{1..2}-> (friend:Person)
      friend != person   
    SELECT DISTINCT friend
  }
  friend -[works:WORKS_AT WITH ~workFrom < '2012-01-01'^^date]-> (company:Company) -[:IS_LOCATED_IN]-> (:Country WITH ~name = "CHINA")
SELECT friend.id, friend.firstName, friend.lastName, works.workFrom, company.name
ORDER BY ASC(works.workFrom), ASC(friend.id), ASC(company.name)
LIMIT 10